/*
 * ???????????????????????????
 * ?????:www.lckfb.com
 * ????????,??????????????
 * ????:https://oshwhub.com/forum
 * ??bilibili??:???????,?????????!
 * ??????,???????????
 * Change Logs:
 * Date           Author       Notes
 * 2024-03-29     LCKFB-LP    first version
 * 2024-06-03     HAL_Conv    converted to HAL library
 */
#include "bsp_touchkey.h"

/******************************************************************
 * ? ? ? ?:TTP224_GPIO_Init
 * ? ? ? ?:????????TTP224?????(HAL???)
 * ? ? ? ?:?
 * ? ? ? ?:?
******************************************************************/
void TTP224_GPIO_Init(void)
{
    GPIO_InitTypeDef GPIO_InitStruct = {0};
    
    // ??GPIOA??
    __HAL_RCC_GPIOA_CLK_ENABLE();
    
    // ?????????????
    GPIO_InitStruct.Pin = TOUCH_PIN_1 | TOUCH_PIN_2 | TOUCH_PIN_3 | TOUCH_PIN_4;
    GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
    GPIO_InitStruct.Pull = GPIO_PULLDOWN;
    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
    
    HAL_GPIO_Init(TOUCH_PORT, &GPIO_InitStruct);
}

/******************************************************************
 * ? ? ? ?:Key_IN1_Scanf
 * ? ? ? ?:?????1??????
 * ? ? ? ?:?
 * ? ? ? ?:0=???????  1=?????
******************************************************************/
uint8_t Key_IN1_Scanf(void)
{
    return HAL_GPIO_ReadPin(TOUCH_PORT, TOUCH_PIN_1);
}

/******************************************************************
 * ? ? ? ?:Key_IN2_Scanf
 * ? ? ? ?:?????2??????
 * ? ? ? ?:?
 * ? ? ? ?:0=???????  1=?????
******************************************************************/
uint8_t Key_IN2_Scanf(void)
{
    return HAL_GPIO_ReadPin(TOUCH_PORT, TOUCH_PIN_2);
}

/******************************************************************
 * ? ? ? ?:Key_IN3_Scanf
 * ? ? ? ?:?????3??????
 * ? ? ? ?:?
 * ? ? ? ?:0=???????  1=?????
******************************************************************/
uint8_t Key_IN3_Scanf(void)
{
    return HAL_GPIO_ReadPin(TOUCH_PORT, TOUCH_PIN_3);
}

/******************************************************************
 * ? ? ? ?:Key_IN4_Scanf
 * ? ? ? ?:?????4??????
 * ? ? ? ?:?
 * ? ? ? ?:0=???????  1=?????
******************************************************************/
uint8_t Key_IN4_Scanf(void)
{
    return HAL_GPIO_ReadPin(TOUCH_PORT, TOUCH_PIN_4);
}